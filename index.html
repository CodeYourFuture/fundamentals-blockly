<html>
  <head>
    <title>CYF Blocks - Unblock your future!</title>
    

    <link rel="stylesheet" href="./style.css" />
    <script type="module" src="https://cdn.jsdelivr.net/gh/zerodevx/zero-md@2/dist/zero-md.min.js"></script>
  </head>
  <body>
    <script src="https://unpkg.com/blockly@7.20211209.0/blockly.min.js"></script>
    <script src="blockly-dom.js"></script>
    <script src="blockly-cyf.js"></script>
    <script src="jsoncrush.js"></script>
    <script src="editor.js"></script>

     <header>
      <h1>CYF Blocks</h1>
      <button onclick="getElementById('toc').classList.toggle('open')">
        <span style="position: absolute;transform: translateY(-100vh);">Menu</span> 
        <svg viewBox="0 0 100 80" width="30" height="30">
        <rect width="100" height="10" fill="currentColor"></rect>
        <rect y="30" width="100" height="10" fill="currentColor"></rect>
        <rect y="60" width="100" height="10" fill="currentColor"></rect>
        </svg>
      </button>
    </header>
    <nav id="toc"></nav>
    <div id="exercises">
      
      <div class="exercise" id="introduction">
      <h2>Introduction</h2>
      <div class="instructions">
        <zero-md src="exercises/introduction.md"></zero-md>
      </div>
      </div>
      <div class="exercise" id="exercise_change_text">
      <h2>Modifying html dynamically: changing text</h2>
      <script>
      BlocklyTest.registerTest("exercise_change_text", () => {
        let noun1 = BlocklyTest.findElement(["#noun1"]);
        let noun2 = BlocklyTest.findElement(["#noun2"]);
        let verb = BlocklyTest.findElement(["#verb"]);
        let adjective = BlocklyTest.findElement(["#adjective"]);
        BlocklyTest.expect(1, "first noun was changed", noun1, (noun1) => {
          return noun1.innerText.toLowerCase() !== "dog";
        });

        BlocklyTest.expect(2, "all words were changed", noun1, (noun1) => {
          return (
            noun1.innerText.toLowerCase() !== "dog" &&
            noun2.innerText.toLowerCase() !== "cat" &&
            adjective.innerText.toLowerCase() !== "white" &&
            verb.innerText.toLowerCase() !== "saw"
          )
        });
      });
    </script>
      <div class="instructions" >
        <zero-md src="exercises/changing_text.md" ></zero-md>
      </div>
       <xml class="toolbox" style="display: none">
          <category name="Values" colour='%{BKY_TEXTS_HUE}'>
            <block type="text"></block>
            <block type="get_randomWord"></block>
          </category>
          <category name="Html" colour="%{BKY_COLOUR_HUE}">
            <block type="on_start"></block>
            <block type="with_element_by_id"></block>
            <block type="set_content">
              <value name="VALUE">
                <shadow type="text"> </shadow>
              </value>
            </block>
          </category>
        </xml>
      </div>

      
      <div class="exercise" id="exercise_set_colours">
      <h2>Modifying html dynamically: setting colours</h2>
      <script>
      BlocklyTest.registerTest("exercise_set_colours", () => {
        let firstLi = BlocklyTest.findElement(["#banana", "li:nth-child(1)"]);
        let startColor = window.getComputedStyle(firstLi).color;
        BlocklyTest.expect(1, "colour was changed", firstLi, (li) => {
          return window.getComputedStyle(li).color != startColor;
        })
        let startBackgroundColor = window.getComputedStyle(firstLi).backgroundColor;
        BlocklyTest.expect(2, "background colour was changed", firstLi, (li) => {
          return window.getComputedStyle(li).backgroundColor != startBackgroundColor;
        })
        if (firstLi) {
          BlocklyTest.expect(3, "all colours are changed", firstLi.parentElement, (ul) => {
            return ul.children.length > 1 && Array.from(ul.children).every((li) => window.getComputedStyle(li).color != startColor);
          })
        }
      });
    </script>
      <div class="instructions">
      <zero-md src="exercises/set_colours.md"></zero-md>
       </div>
       <xml class="toolbox" style="display: none">
          <category name="Values" colour='%{BKY_TEXTS_HUE}'>
            <block type="math_number"></block>
            <block type="text"></block>
            <block type="colour_picker"></block>
            <block type="logic_boolean"></block>
          </category>
          <category name="Html" colour="%{BKY_COLOUR_HUE}">
            <block type="on_start"></block>
            <block type="with_element_by_id"></block>
            <block type="set_content">
              <value name="VALUE">
                <shadow type="text"> </shadow>
              </value>
            </block>
            <block type="set_attribute"></block>
          </category>
        </xml>
      </div>
      
      <div class="exercise" id="exercise_add_fruit">
      <h2>Creating html dynamically: lists of fruit</h2>
      <script>
        BlocklyTest.registerTest("exercise_add_fruit", () => {
          let ul = BlocklyTest.findElement(["#list", "ul", "ol"]);
          let startLiCount = 0;
          if (ul) {
            startLiCount = ul.children.length;
          }
          BlocklyTest.expect(1, "Banana is added dynamically as the second item", ul, (ul) => {
            if (startLiCount !== 2 && !ul.children.length == 2) return false;
            return ul.children.item(1).innerText == "Banana" || ul.children.item(1).innerText == "banana" 
          })
          BlocklyTest.expect(2, "There are at least 4 items", ul, (ul) => {
            return ul.children.length >= 4
          })
        });
      </script>
      <div class="instructions">
      <p>
        Not only can we modify existing html elements, we can also create new ones and set their text and properties.
      </p>
        <ol>
            <li>Let's start with an html list with a single apple in the "Static html" 
                <ol>
                    <li>Note the list has an id ("list") so that we can refer to it from our program.</li>
                    <li>for example: <code class="start_code">&lt;ul id="list"&gt;<br>&lt;li&gt;Apple&lt;/li&gt;<br>&lt;/ul&gt;</code></li>
                </ol>
            <li>Add one more fruit dynamically
                <ol>
                    <li>Add an <span class="blockname">"at the start"</span> block</li>
                    <li>Inside this block, add a <span class="blockname">"find the element with id"</span> block using the id for the ul element (<code>list</code>)</li>
                    <li>Inside this block, add a <span class="blockname">"create a new ... element"</span> block and select "&lt;li&gt;"</li>
                    <li>Inside this block, add a <span class="blockname">"set the text content"</span> block and set the value to "Banana"</li>
                    <li id="exercise_add_fruit_1">Click "run" to check the output looks like
                        <ul style="background-color: azure;">
                            <li>Apple</li>
                            <li>Banana</li>
                        </ul>
                    </li>
                </ol>
            </li>
            <li id="exercise_add_fruit_2">Repeat the process above to add two more of your favourite fruit (hint: you can add multiple <span class="blockname">"create a new ... element"</span> blocks one after the other)</li> 
        </ol>
       </div>
       <xml class="toolbox" style="display: none">
          <category name="Values" colour='%{BKY_TEXTS_HUE}'>
            <block type="math_number"></block>
            <block type="text"></block>
            <block type="colour_picker"></block>
            <block type="logic_boolean"></block>
          </category>
          <category name="Html" colour="%{BKY_COLOUR_HUE}">
            <block type="on_start"></block>
            <block type="with_element_by_id"></block>
            <block type="add_element"></block>
            <block type="set_content">
              <value name="VALUE">
                <shadow type="text"> </shadow>
              </value>
            </block>
            <block type="set_attribute"></block>
          </category>
        </xml>
      </div>
      
      <div class="exercise" id="exercise_list_links">
      <h2>Creating html dynamically: lists of links</h2>
      <script>
        BlocklyTest.registerTest("exercise_list_links", () => {
          let ul = BlocklyTest.findElement(["#list", "ul", "ol"]);
          let startLiCount = 0;
          if (ul) {
            startLiCount = ul.children.length;
          }
          BlocklyTest.expect(1, "There are 3 links with href attributes", ul, (ul) => {
            var lis = Array.from(ul.querySelectorAll("li"));
            return startLiCount != 3 && lis.length == 3 && lis.every((li) => li.querySelector("a[href]") && li.querySelector("a[href]").innerText);
          })
        });
      </script>
      <div class="instructions">
      <p>
        This exercise consolidates the use of the blocks we learned about in the previous exercises.
      </p>
        <ol>
            <li>Start with an empty unordered html list (<code class="start_code">&lt;ul id="list"&gt;&lt;/ul&gt;</code>) in the static html.
            <li>Dynamically add your favourite links to the html list
                <ol>
                    <li>Find the URLs of your three favourite websites (they look something like: <code>http://www.codeyourfuture.io</code>)</li>
                    <li>Use the blocks we have seen so far ("at the start", "find the element with id", "create a new ... element", "set the attribute", "set the text content", and the Values blocks)</li>
                    <li>Hint: you will need to create an <code>&lt;a&gt;</code> inside of each <code>&lt;li&gt;</code></li>
                    <li>Hint: remember that to set the target of an <code>&lt;a&gt;</code> you can use the <code>&lt;href&gt;</code> attribute. Without this attribute, your link will not <i>look</i> like a link</li>
                    <li>Note about problem solving: The less blocks you add before clicking "run", the more you can be sure the code you have so far does what you expect. How could you break your solution down into small chunks where you can test at each stage by clicking "run"?</li>
                    <li id="exercise_list_links_1">Click "run" to check the output looks something like
                        <ul style="background-color: azure;">
                            <li><a href="http://www.codeyourfuture.io">Code your future</a></li>
                            <li><a href="http://www.google.com">Google</a></li>
                            <li><a href="http://news.bbc.co.uk">BBC News</a></li>
                        </ul>
                    </li>
                </ol>
            </li> 
        </ol>
       </div>
       <xml class="toolbox" style="display: none">
          <category name="Values" colour='%{BKY_TEXTS_HUE}'>
            <block type="math_number"></block>
            <block type="text"></block>
            <block type="colour_picker"></block>
            <block type="logic_boolean"></block>
          </category>
          <category name="Html" colour="%{BKY_COLOUR_HUE}">
            <block type="on_start"></block>
            <block type="with_element_by_id"></block>
            <block type="add_element"></block>
            <block type="set_content">
              <value name="VALUE">
                <shadow type="text"> </shadow>
              </value>
            </block>
            <block type="set_attribute"></block>
          </category>
        </xml>
      </div>
      
      <div class="exercise" id="exercise_button_add">
      <h2>Buttons and clicks: A button to add apples</h2>
      <script>
        BlocklyTest.registerTest("exercise_button_add", () => {
          let ul = BlocklyTest.findElement(["#list", "ul", "ol"]);
          let button = BlocklyTest.findElement(["#button", "button:nth-of-type(1)"]);
          let button2 = BlocklyTest.findElement(["#button2", "button:nth-of-type(2)"]);

          BlocklyTest.expectAfterClick(1, "The button adds an apple", button, 
          () => {
            let count = ul ? ul.children.length : 0;
            return count;
          },
          (countBefore, countAfter) => {
            let addsExactlyOneChild = countBefore + 1 == countAfter
            var lastLi = ul.lastChild;
            return (addsExactlyOneChild && lastLi.innerText.toLowerCase() == "apple");
          });

          BlocklyTest.expectAfterClick(2, "The second button removes all apples", button2, 
          () => {
            let count = ul ? ul.children.length : 0;
            return count;
          },
          (countBefore, countAfter) => countBefore > 0 && countAfter == 0);
        });
      </script>
      <div class="instructions">
      <p>
        JavaScript is often "event-driven". This means it is run in when the user interacts with the page (clicking, typing, etc.). Let's make it so every time we (as a "user") click on an "add an apple" button, it adds an apple to the list.
      </p>
        <ol>
            <li>Start with an empty unordered html list (<code>&lt;ul&gt;</code>) and a button to add apples to the list (<code>&lt;button&gt;</code>) in the static html.
                <ol>
                    <li>for example: <code class="start_code">&lt;ul id="list"&gt;&lt;/ul&gt;<br>&lt;button id="button"&gt;add an apple&lt;/button&gt;</code></li>
                </ol>
            <li>When we click on the "add an apple" button, let's add an apple to the list
                <ol>
                    <li>Add a <span class="blockname">"when the element with id ... is clicked"</span> block (it doesn't need to be connected to any other blocks)</li>
                    <li id="exercise_button_add_1">Inside this block, add the blocks necessary to find the "list" element, create a new "li" element and set the content to "apple" (you know how to do this from previous exercises)</li>
                </ol>
            </li> 
            <li id="exercise_button_add_2">Can you add a second button (in the static html, with a different id) that removes all the apples (you can do this by using the <span class="blockname">"remove the contents of the element"</span> block).              
            </li>
        </ol>
       </div>
       <xml class="toolbox" style="display: none">
          <category name="Values" colour='%{BKY_TEXTS_HUE}'>
            <block type="math_number"></block>
            <block type="text"></block>
            <block type="colour_picker"></block>
            <block type="logic_boolean"></block>
          </category>
          <category name="Html" colour="%{BKY_COLOUR_HUE}">
            <block type="on_start"></block>
            <block type="element_clicked"></block>
            <block type="with_element_by_id"></block>
            <block type="add_element"></block>
            <block type="set_content">
              <value name="VALUE">
                <shadow type="text"> </shadow>
              </value>
            </block>
            <block type="set_attribute"></block>
            <block type="remove_contents"></block>
          </category>
        </xml>
      </div>
      
      <div class="exercise" id="exercise_button_input">
        <h2>Inputs and clicks: say something</h2>
        <div class="instructions">
        <p>
          We can also get user input when a button is clicked. Let's have the browser say a word or sentence that the user enters.
        </p>
        <ol>
            <li>Start with a text input box list (<code>&lt;input /&gt;</code>) and a button to that says "speak" in the static html.
                <ol>
                    <li>for example: <code class="start_code">&lt;input id="text" /&gt;<br>&lt;button id="button"&gt;speak&lt;/button&gt;</code></li>
                </ol>
            </li>
            <li>We want to do two things in order when the button is clicked. First we get the value entered by the user, then we pass it to a block that will say it out loud. A common strategy in problem solving for programming is to solve the visible (or in this case, audible) thing first: have the browser say something. 
                <ol>
                    <li>Add a <span class="blockname">"when the element with id ... is clicked"</span> block</li>
                    <li>Inside this block, add a <span class="blockname">"say"</span> block from the Values menu</li>
                    <li>As input to this block, connect a <span class="blockname">"get a random word"</span> block</li>
                    <li>Check that a random word gets said when you click "speak"</li>
                </ol>
            </li>
            <li>Now that we know a word gets said out loud when we click the button, we can make it be the one from the input box. 
                <ol>
                    <li>Replace the <span class="blockname">"get a random word"</span> block with a <span class="blockname">"get the value of &lt;input&gt; with id"</span> block, using the input's id</li>
                    <li>Check that whatever word you write in the input box gets said when you click "speak"</li>
                </ol>
            </li>
            <li>Do you see why it was useful to solve this problem in reverse order?</li>
        </ol>
       </div>
       <xml class="toolbox" style="display: none">
          <category name="Values" colour='%{BKY_TEXTS_HUE}'>
            <block type="text"></block>
            <block type="get_randomWord"></block>
            <block type="text_to_speech"></block>
          </category>
          <category name="Html" colour="%{BKY_COLOUR_HUE}">
            <block type="on_start"></block>
            <block type="element_clicked"></block>
            <block type="with_element_by_id"></block>
            <block type="add_element"></block>
            <block type="set_content">
              <value name="VALUE">
                <shadow type="text"> </shadow>
              </value>
            </block>
            <block type="set_attribute"></block>
            <block type="remove_contents"></block>
            <block type="get_input_value_with_id"></block>
          </category>
        </xml>
      </div>

      <div class="exercise" id="exercise_todo_list">
        <h2>Buttons, inputs and clicks: a todo list</h2>
        <div class="instructions">
        <p>
          We're going to create a list of things to do.
        </p>
        <ol>
            <li>Start with an empty list, an input, and a button "add Todo Item" in the static html. <code class="start_code">&lt;p&gt;Things to do:&lt;/p&gt;<br>&lt;ul id="list"&gt;&lt;/ul&gt;<br>&lt;input id="text" /&gt;<br>&lt;button id="button"&gt;add Todo Item&lt;/button&gt;</code></li>
            <li>When the button is clicked, we are going to do two things: get the value of the input box and add a new <code>&lt;li&gt;</code> with that value to the list. To do the visible outcome first, we're going to do these in reverse order.</li>
                <ol>
                    <li>Add an <span class="blockname">"when the element with id ... is clicked"</span> block.</li>
                    <li>First find the list element (id <code>list</code>) and add a new <code>&lt;li&gt;</code> with an arbitrary text value (for example "do cyf homework"). Check that this works.</li>
                    <li>Now, replace the arbitrary content of the new <code>&lt;li&gt;</code> with the value of the input, using the <span class="blockname">"get the value of &lt;input&gt; with id"</span> block.</li>
                </ol>
            </li>
        </ol>
       </div>
       <xml class="toolbox" style="display: none">
          <category name="Values" colour='%{BKY_TEXTS_HUE}'>
            <block type="math_number"></block>
            <block type="text"></block>
            <block type="colour_picker"></block>
            <block type="logic_boolean"></block>
          </category>
          <category name="Html" colour="%{BKY_COLOUR_HUE}">
            <block type="on_start"></block>
            <block type="element_clicked"></block>
            <block type="with_element_by_id"></block>
            <block type="add_element"></block>
            <block type="set_content">
              <value name="VALUE">
                <shadow type="text"> </shadow>
              </value>
            </block>
            <block type="set_attribute"></block>
            <block type="remove_contents"></block>
            <block type="get_input_value_with_id"></block>
          </category>
         <category name="Variables" colour="330" custom="VARIABLE"></category>
        </xml>
      </div>

      
      <div class="exercise" id="exercise_button_consolidation">
        <h2>Buttons and clicks consolidation</h2>
        <div class="instructions">
        <p>
          Anything that we could do previously as soon as run is clicked, we can now do as a response to clicking buttons or other elements in the static html.
        </p>
        <ol>
            <li id="exercise_button_consolidation_4">Place the sentence from the first exercise in the static html, but this time with &lt;button&gt; elements around the words to be filled in (<code class="start_code">&lt;p&gt;The &lt;button id="noun1"&gt;dog&lt;/button&gt; &lt;button id="verb"&gt;saw&lt;/button&gt; the &lt;button id="adjective"&gt;white&lt;/button&gt; &lt;button id="noun2"&gt;cat&lt;/button&gt;&lt;/p&gt;</code>). Make it so each button's text gets set to a random word when it is clicked?</li>
            <li id="exercise_button_consolidation_1">Place two buttons ("day mode" and "night mode") and an html list in the static html. Can you add blocks so that when the buttons are clicked, the html list changes to "day mode" (dark text on a light background) and "night mode" (light text on a dark background)?</li>
            <li id="exercise_button_consolidation_2">Place a button in the static html. Can you add blocks so it changes colour when it is clicked?</li>
            <li id="exercise_button_consolidation_3">Place an image in the static html. Can you add blocks so it changes when it is clicked?</li>
        </ol>
       </div>
       <xml class="toolbox" style="display: none">
          <category name="Values" colour='%{BKY_TEXTS_HUE}'>
            <block type="math_number"></block>
            <block type="text"></block>
            <block type="colour_picker"></block>
            <block type="logic_boolean"></block>
          </category>
          <category name="Html" colour="%{BKY_COLOUR_HUE}">
            <block type="on_start"></block>
            <block type="element_clicked"></block>
            <block type="with_element_by_id"></block>
            <block type="add_element"></block>
            <block type="set_content">
              <value name="VALUE">
                <shadow type="text"> </shadow>
              </value>
            </block>
            <block type="set_attribute"></block>
            <block type="remove_contents"></block>
          </category>
        </xml>
      </div>      
      
      <div class="exercise" id="exercise_button_variables_state">
        <h2>Variables: keeping track of the number of clicks</h2>
        <div class="instructions">
        <p>
          A variable is a name into which a value can be stored. There are several reasons for which we might want to do this. The first is when we want to keep track of a value that changes over time. Let's keep track of the number of times a button is clicked.
        </p>
        <ol>
            <li>Start with a button (<code>&lt;button&gt;</code>) that has been clicked 0 times in the static html. <code class="start_code">&lt;button id="button"&gt;0&lt;/button&gt;</code></li>
            <li>Add an <span class="blockname">"at the start"</span> block. Inside we are going to add a variable that will keep track of the number of times the button was clicked.</li>
                <ol>
                    <li>In the Variables menu, click "create variable..." to create a variable called <code>click_count</code></li>
                    <li>From the Variables menu, create a <span class="blockname">"set click_count to"</span> block and place it inside the <span class="blockname">"at the start"</span></li>
                    <li>Set the value to 0 (from the Values menu)</li>
                </ol>
            </li>
            <li>When the button is clicked, we are going to do two things: increase the value of <code>click_count</code> by 1; and change the text of the button to the new value of click_count.</li>
                <ol>
                    <li>Add an <span class="blockname">"when the element with id ... is clicked"</span> block. </li>
                    <li>Inside this block, add a <span class="blockname">"change click_count by 1"</span> block from the Variables menu.</li>
                    <li>Add the necessary blocks to set the text content of the button to the value of <code>click_count</code>. (You can get this value by selecting the <span class="blockname">"click_count"</span> block from the Variables menu)</li>
                </ol>
            </li>
        </ol>
        <p>Note that it will be a common pattern that you first set a variable in the <span class="blockname">"at the start"</span> block and then modify it in at <span class="blockname">"when the element with id ... is clicked"</span> block. This first setting of the variable is called "initialisation".</p>
       </div>
       <xml class="toolbox" style="display: none">
          <category name="Values" colour='%{BKY_TEXTS_HUE}'>
            <block type="math_number"></block>
            <block type="text"></block>
            <block type="colour_picker"></block>
            <block type="logic_boolean"></block>
          </category>
          <category name="Html" colour="%{BKY_COLOUR_HUE}">
            <block type="on_start"></block>
            <block type="element_clicked"></block>
            <block type="with_element_by_id"></block>
            <block type="add_element"></block>
            <block type="set_content">
              <value name="VALUE">
                <shadow type="text"> </shadow>
              </value>
            </block>
            <block type="set_attribute"></block>
            <block type="remove_contents"></block>
            <block type="get_input_value_with_id"></block>
          </category>
         <category name="Variables" colour="330" custom="VARIABLE"></category>
        </xml>
      </div>
            
      <div class="exercise" id="exercise_button_variables_consolidation">
        <h2>Variables consolidation: counting sheep</h2>
        <div class="instructions">
        <p>
          Let's combine our variables to track state with some of the other blocks we have learned about. We would like to track how many times the user adds the word "sheep" and how many times they add any other word.
        </p>
        <ol>
            <li>Let's start with the following static html. <code class="start_code">&lt;p&gt;There have been &lt;span id="sheep_count"&gt;0&lt;/span&gt; sheep üêë and &lt;span id="other_count"&gt;0&lt;/span&gt; others.&lt;/p&gt;<br>&lt;input id="text" /&gt;<br>&lt;button id="button"&gt;add animal&lt;/button&gt;</code></li>
            <li>The following things should happen (use variables where necessary to keep track of various values, and the blocks you need from the Logic menu). Don't forget to break down your implementation into steps where you first add blocks that make a visible difference and test that it works.</li>
                <ol>
                    <li>When the user clicks "add animal", if the word in the text input is "sheep", the number of sheep displayed in the <code>&lt;span&gt</code> with id <code>sheep_count</code> should increase by one.</li>
                    <li>When the user clicks "add animal", if the word in the text input is not sheep, the number displayed in the <code>&lt;span&gt</code> with id <code>other_count</code> should increase by one.</li>
                    <!--<li>(we don't have any way currently to check if the word in the text input is actually an animal - we'll fix this in a few exercises)</li>-->
                </ol>
            </li>
        </ol>
       </div>
       <xml class="toolbox" style="display: none">
          <category name="Logic" colour="210">
            <block type="controls_if"></block>
            <block type="logic_negate"></block>
            <block type="logic_compare"></block>
          </category>
          <category name="Values" colour='%{BKY_TEXTS_HUE}'>
            <block type="math_number"></block>
            <block type="text"></block>
            <block type="colour_picker"></block>
            <block type="logic_boolean"></block>
          </category>
          <category name="Html" colour="%{BKY_COLOUR_HUE}">
            <block type="on_start"></block>
            <block type="element_clicked"></block>
            <block type="with_element_by_id"></block>
            <block type="add_element"></block>
            <block type="set_content">
              <value name="VALUE">
                <shadow type="text"> </shadow>
              </value>
            </block>
            <block type="set_attribute"></block>
            <block type="remove_contents"></block>
            <block type="get_input_value_with_id"></block>
          </category>
         <category name="Variables" colour="330" custom="VARIABLE"></category>
        </xml>
      </div>

      
      <div class="exercise" id="exercise_arrays_random">
      <h2>Arrays: Mad Libs revisited</h2>
      <div class="instructions">
      <p>When we did the first Mad Libs exercise, we weren't able to make our own list of words to choose from but could only pick a category (noun, adjective, verb). 
        We will now introduce a data structure called an <b>Array</b>, that represents a list of data (typically numbers or texts) in JavaScript. 
        They can be created and used from the "Arrays" menu. Let's create our own list of words to select from.
      </p>
      <ol>
          <li>Start with a Mad Libs sentence similar to before (<code class="start_code">&lt;p&gt;The &lt;u id="noun"&gt;man&lt;/u&gt; &lt;u id="verb"&gt;saw&lt;/u&gt; the &lt;u id="adjective"&gt;white&lt;/u&gt; &lt;u id="animal"&gt;cat&lt;/u&gt;&lt;/p&gt;</code></li>
          <li>Add an <span class="blockname">"at the start"</span> block</li>
          <li>We'll now create an array of animals and assign it to a variable <ol>
              <li>From the "Arrays" menu, add a <span class="blockname">"Set ... to, create array with"</span> block to the <span class="blockname">"at the start"</span> block</li>
              <li>Rename the variable <span class="variablename">"array"</span> to "animals"</li>
              <li>Note, a variable can be used to store any value. In previous exercises, we stored a number. Here we are storing an array, but otherwise it's exactly the same concept.</li>
              <li>Add at least 3 animal text values to this array</li>
              <li>Note: You can click on the gear icon at the top left of the <span class="blockname">"create array with"</span> block to add and remove slots for values</li>
          </ol></li>
          <li>Let's set the text of the <code>&lt;u id="animal"&gt;</code> to a random animal.<ol>
              <li>You already know how to do most of the steps (find the element with id animal, set its text content)</li>
              <li>The thing we will do differently is to set the text content to a <span class="blockname">get a random item from array</span> block, selecting the "animals" array in the dropdown.</li>
              <li>Click "run" several times to check you get a random animal from your array each time.</li>
          </ol></li>
          <li>Create additional arrays from which to select random words for each slot to be filled and share the result with your cohort.</li>
      </ol>
      </div>
      <xml class="toolbox" style="display: none">
        <category name="Values" colour='%{BKY_TEXTS_HUE}'>
          <block type="math_number"></block>
          <block type="text"></block>
          <block type="colour_picker"></block>
          <block type="logic_boolean"></block>
        </category>
        <category name="Html" colour="%{BKY_COLOUR_HUE}">
          <block type="on_start"></block>
          <block type="element_clicked"></block>
          <block type="with_element_by_id"></block>
          <block type="add_element"></block>
          <block type="set_content">
            <value name="VALUE">
              <shadow type="text"> </shadow>
            </value>
          </block>
          <block type="set_attribute"></block>
          <block type="remove_contents"></block>
          <block type="element_clicked_current"></block>
          <block type="with_elements_by_selector"></block>
        </category>
        <category name="Arrays" colour="%{BKY_LISTS_HUE}">
          <block type="variables_set">
            <field name="VAR">array</field>
            <value name="VALUE">
              <block type="lists_create_with">
              </block>
            </value>
          </block>
          <block type="get_randomMember">
          <value name="ARRAY">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
        </category>
        <category name="Variables" colour="330" custom="VARIABLE"></category>
      </xml>
      </div>

      <div class="exercise" id="exercise_arrays_foreach">
      <h2>Arrays and loops</h2>
      <script>
        BlocklyTest.registerTest("exercise_arrays_foreach", () => {
          let ul = BlocklyTest.findElement(["#list", "ul", "ol"]);
          let list = BlocklyTest.findArrayValues(0); // first of the arrays is the one we want

          BlocklyTest.expect(1, "One element is shown", ul, (ul) => {
            var lis = Array.from(ul.querySelectorAll("li"));
            return lis.length > 0 && lis[0].innerText == list[0];
          });

          BlocklyTest.expect(2, "As many elements are shown as there are items in the array", ul, (ul) => {
            var lis = Array.from(ul.querySelectorAll("li"));
            return lis.length == list.length;
          });

          BlocklyTest.expect(3, "All the elements in the array (at least 3) are in the html list", ul, (ul) => {
            var lis = Array.from(ul.querySelectorAll("li"));
            return list.length >= 3 && lis.length == list.length && lis.every((li, index) => li.innerText == list[index]);
          });

          BlocklyTest.expect(4, "All the elements in the array (at least 4) are in the html list", ul, (ul) => {
            var lis = Array.from(ul.querySelectorAll("li"));
            return list.length >= 4 && lis.length == list.length && lis.every((li, index) => li.innerText == list[index]);
          });
        });
      </script>
      <div class="instructions">
      <p>In this series of exercises, we have so far used one <span class="blockname">"create a new ... element"</span> for each <code>&lt;li&gt;</code> we want to create. 
        Another use for an array is when we want to do the same thing with each element in an array (for example, create a <code>&lt;li&gt;</code>).
      </p>
      <ol>
          <li>Start with an empty unordered html list with the id "list" (<code class="start_code">&lt;ul id="list"&gt;&lt;/ul&gt;</code>) in the static html.</li>
          <li>Add an <span class="blockname">"at the start"</span> block</li>
          <li>We'll now create an array of fruits and assign it to a variable <ol>
              <li>From the "Arrays" menu, add a <span class="blockname">"Set ... to, create array with"</span> block to the <span class="blockname">"at the start"</span> block</li>
              <li>Rename the variable <span class="variablename">"array"</span> to "fruits"</li>
              <li>Add at least 3 fruit text values to this array</li>
          </ol></li>
          <li>Let's do the first steps to convert the first entry in this array into <code>&lt;li&gt;</code><ol>
              <li>You already know how to do most of the steps (find the element with id list, create an li, set its text content)</li>
              <li>The thing we will do differently is to set the text content to a <span class="blockname">get the first item from the array</span> block, selecting the "fruits" array in the dropdown.</li>
              <li id="exercise_arrays_foreach_1">Click "run" to check you are displaying a list with one fruit</li>
          </ol></li>
          <li>Let's use this same code to show all the fruits<ol>
              <li>At the beginning of the <span class="blockname">"find the element with id"</span> block, insert a <span class="blockname">"for each item in array"</span> block. Select the fruits array in the dropdown.</li>
              <li>Move all of the <span class="blockname">"create a new ... element"</span> block inside the for <span class="blockname">"for each item in array"</span> block</li>
              <li id="exercise_arrays_foreach_2">As you can see by clicking "run", you now have a list with multiple items - but they are all the first item in the array</li>
              <li>Inside the loop, you have a variable available called <span class="variablename">"item"</span>. Each time through the loop, this variable will take on the value of the next fruit in the array</li>
              <li>Replace the <span class="blockname">get the first item from the array</span> block with a "item" variable block (you can find it in the Variables menu)</li>
              <li id="exercise_arrays_foreach_3">Check by clicking run that you now have a list with each item of fruit in your array.</li>
              <li>If you have an array called "fruits", it's good practice to rename the loop "item" variable to "fruit".</li>
          </ol></li>
          <li id="exercise_arrays_foreach_4">Add another fruit to your array and check that all your fruits are still shown.</li>
      </ol>
      </div>
      <xml class="toolbox" style="display: none">
        <category name="Values" colour='%{BKY_TEXTS_HUE}'>
          <block type="math_number"></block>
          <block type="text"></block>
          <block type="colour_picker"></block>
          <block type="logic_boolean"></block>
        </category>
        <category name="Html" colour="%{BKY_COLOUR_HUE}">
          <block type="on_start"></block>
          <block type="element_clicked"></block>
          <block type="with_element_by_id"></block>
          <block type="add_element"></block>
          <block type="set_content">
            <value name="VALUE">
              <shadow type="text"> </shadow>
            </value>
          </block>
          <block type="set_attribute"></block>
          <block type="remove_contents"></block>
          <block type="element_clicked_current"></block>
          <block type="with_elements_by_selector"></block>
        </category>
        <category name="Arrays" colour="%{BKY_LISTS_HUE}">
          <block type="variables_set">
            <field name="VAR">array</field>
            <value name="VALUE">
              <block type="lists_create_with">
              </block>
            </value>
          </block>
          <block type="arrays_getFirst">
            <value name="VALUE">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="arrays_push">
            <value name="LIST">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="lists_isEmpty">
            <value name="VALUE">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="arrays_forEach">
            <field name="VAR">item</field>
            </value>
            <value name="LIST">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="get_sum">
            <value name="ARRAY">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
        </category>
        <category name="Variables" colour="330" custom="VARIABLE"></category>
      </xml>
      </div>

      
      <div class="exercise" id="exercise_arrays_buttons">
      <h2>Arrays and buttons</h2>
      <script>
        BlocklyTest.registerTest("exercise_arrays_buttons", () => {
          let ul = BlocklyTest.findElement(["#list", "ul", "ol"]);
          let button = BlocklyTest.findElement(["#button", "button"]);
          let arrayToBeRevealed = BlocklyTest.findArrayValues(0); // first of the arrays is the one we want
          let totalElementsAtEnd = arrayToBeRevealed.length;

          BlocklyTest.expectAfterClick(1, "Each click of the button adds an li", button, 
          () => {
            let count = ul ? ul.children.length : 0;
            return count;
          },
          (countBefore, countAfter) => {
            let addsExactlyOneChild = countBefore + 1 == countAfter;
            return addsExactlyOneChild;
          });

          BlocklyTest.expectAfterClick(2, "Each click of the button reveals a fruit", button, 
          () => {
            let count = ul ? ul.children.length : 0;
            return count;
          },
          (countBefore, countAfter) => {
            let addsExactlyOneChild = countBefore + 1 == countAfter;
            if (addsExactlyOneChild) {
              let lastLi = ul.lastChild;
              if (lastLi && lastLi.innerText == arrayToBeRevealed[0]) {
                arrayToBeRevealed.shift();
              }
            }
            return arrayToBeRevealed.length == 0;
          });

          BlocklyTest.expectAfterClick(3, "Each click of the button reveals a fruit", button, 
          () => {
            let count = ul ? ul.children.length : 0;
            return count;
          },
          (countBefore, countAfter) => {
            return arrayToBeRevealed.length == 0 && countBefore == countAfter && countBefore == totalElementsAtEnd
          });
        });
      </script>
      <div class="instructions">
        <p>The most common something with all the items in an array is to use a loop, as we saw in the previous exercise. Sometimes, a loop just doesn't do what we need, for example if we wanted to make the list of fruit appear gradually.</p>
      <ol>
          <li>Create an empty unordered html list (as usual) and a "reveal next fruit" button (<code class="start_code">&lt;ul id="list"&gt;&lt;/ul&gt;<br>&lt;button id="button"&gt;reveal next fruit&lt;/button&gt;</code>)</li>
          <li>Create an array of your favourite fruit inside an <span class="blockname">"at the start"</span> block</li>
          <li>We'll now make it so each click of the button reveals the next fruit.
          <ul>
            <li id="exercise_arrays_buttons_1">Add a <span class="blockname">"when the element with id ... is clicked"</span> block. Make it add an <code>&lt;li&gt;</code> with the text "fruit" for now (and check it works)</li>
            <li>As we did at the start of the previous exercise, we can use the <span class="blockname">get the first item from the array</span> block instead of the "fruit" text (your fruits array is accessible from inside the <span class="blockname">"when the element with id ... is clicked"</span> block). Now each time you click the button, a new <code>&lt;li&gt;</code> with the name of the first fruit will appear.</li>
            <li id="exercise_arrays_buttons_2">Change "get the first item" to "<em>get and remove</em> the first item". This will remove the first item from the array, so that the new first item is the old second item: if it was previously <code>["apple", "banana", "cherry"]</code>, it is now <code>["banana", "cherry"]</code></li>
          </ul></li>
          <li>As you can see, after all of the elements in the array have been removed, new <code>&lt;li&gt;</code>s with the text "undefined" are created. Let's fix that!</li>
          <ul>
            <li>We want the behaviour to be different once the array is empty. So we use an <span class="blockname">"if"</span> block from the Logic menu.</li>
            <li>We can check if an array is empty by using the <span class="blockname">"... is empty"</span> block.</li>
            <li>In fact, we only want to add the <code>&lt;li&gt;</code> element if the array is <em>not</em> empty. So we can add a <span class="blockname">"not"</span> block in front of the <span class="blockname">"... is empty"</span> block.</li>
            <li id="exercise_arrays_buttons_3">Now we can move our <code>&lt;li&gt;</code> creating blocks inside the <span class="blockname">"if"</span> block. In the other case (when the list is empty) we want to do nothing. And that's exactly what will happen.</li>
          </ul> 
      </ol>
      </div>
      <xml class="toolbox" style="display: none">
        <category name="Logic" colour="210">
          <block type="controls_if"></block>
          <block type="logic_negate"></block>
          <block type="logic_compare"></block>
        </category>
        <category name="Values" colour='%{BKY_TEXTS_HUE}'>
          <block type="math_number"></block>
          <block type="text"></block>
          <block type="colour_picker"></block>
          <block type="logic_boolean"></block>
        </category>
        <category name="Html" colour="%{BKY_COLOUR_HUE}">
          <block type="on_start"></block>
          <block type="element_clicked"></block>
          <block type="with_element_by_id"></block>
          <block type="add_element"></block>
          <block type="set_content">
            <value name="VALUE">
              <shadow type="text"> </shadow>
            </value>
          </block>
          <block type="set_attribute"></block>
          <block type="remove_contents"></block>
          <block type="get_input_value_with_id"></block>
          <block type="element_clicked_current"></block>
          <block type="with_elements_by_selector"></block>
        </category>
        <category name="Arrays" colour="%{BKY_LISTS_HUE}">
          <block type="variables_set">
            <field name="VAR">array</field>
            <value name="VALUE">
              <block type="lists_create_with">
              </block>
            </value>
          </block>
          <block type="arrays_getFirst">
            <value name="VALUE">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="arrays_push">
            <value name="LIST">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="lists_isEmpty">
            <value name="VALUE">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="arrays_forEach">
            <field name="VAR">item</field>
            </value>
            <value name="LIST">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="get_sum">
            <value name="ARRAY">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
        </category>
        <category name="Variables" colour="330" custom="VARIABLE"></category>
      </xml>
      </div>
      
      <div class="exercise" id="exercise_array_while_loops">
      <h2>Loops and arrays: more fun with fruit</h2>
      <script>
        BlocklyTest.registerTest("exercise_array_while_loops", () => {
          let ul = BlocklyTest.findElement(["#list", "ul", "ol"]);
          let list = BlocklyTest.findArrayValues(0);
          let emojis = BlocklyTest.findArrayValues(1);

          BlocklyTest.expect(1, "All the elements in the list are in the html list.", ul, (ul) => {
            var lis = Array.from(ul.querySelectorAll("li"));
            return lis.length == list.length && lis.every((li, index) => li.innerText.startsWith(list[index]));
          });

          BlocklyTest.expect(2, "All the elements in the list are in the html list. There are 2 spans in each li", ul, (ul) => {
            var lis = Array.from(ul.querySelectorAll("li"));
            return lis.length == list.length && lis.every((li, index) => Array.from(li.querySelectorAll("span")).length == 2);
          });

          BlocklyTest.expect(3, "All the elements in the list are in the html list. There are at least 4 elements", ul, (ul) => {
            var lis = Array.from(ul.querySelectorAll("li"));
            return lis.length == list.length && lis.every((li, index) => li.innerText == list[index]+emojis[index]);
          });
        });
      </script>
      <div class="instructions">
      <p>Using the blocks from the previous exercise and a different kind of loop gives us an alternative way to loop through all the items of an array. Let's see a case where it might be useful.</p>
      <ol>
          <li>Start with an empty unordered html list with the id "list" (<code class="start_code">&lt;ul id="list"&gt;&lt;/ul&gt;</code>) in the static html.</li>
          <li>As with before, create an array called "fruits" of your favourite fruit inside an <span class="blockname">"at the start"</span> block.</li>
          <li>Instead of the <span class="blockname">"for each item in array"</span> block, we will use the <span class="blockname">"repeat while"</span> block and the <span class="blockname">"... is empty"</span> block together<ol>
              <li>As usual, add a <span class="blockname">"find the element with id"</span> block to find the html list</li>
              <li>Add a <span class="blockname">"repeat while"</span> block from the Loops menu inside the previous block and change it to be <span class="blockname">"repeat until"</span> (we are going to keep "get and remove"ing items from the array <em>until</em> it's empty.)</li>
              <li>Set the condition value to <span class="blockname">"... is empty"</span></li>
              <li>Inside the loop, add the blocks to create a new <code>&lt;li&gt;</code> and set the contents to a <span class="blockname">"get and remove the first item from the array"</span> block, using the "fruits" array</li>
              <li id="exercise_array_while_loops_1">Check that all your fruit are now displaying</li>
          </ol></li>
          <li>Next, let's have each <code>&lt;li&gt;</code> contain two things. The name and the emoji of the fruit.<ol>
              <li>We can only set the text contents of an element once. However, we can add multiple elements inside the same <code>&lt;li&gt;</code>. In html, the <code>&lt;span&gt;</code> element is typically used for such a purpose, because it doesn't add any extra meaning or formatting to the text (unlike others which say "this is a list item" or "this is a link")</li>
              <li>Add two <span class="blockname">"create a new ... element"</span> block, selecting <code>&lt;span&gt;</code>. Set the first's content to the <span class="blockname">"get and remove the first item from the array"</span>.</li>
              <li>For now, let's set the second to üçé (you can copy paste this into a text block. More can be found <a href="https://unicode-table.com/en/emoji/food-and-drink/food-fruit/">here</a>)</li>
              <li id="exercise_array_while_loops_2">Check that all your fruit are now displaying with a üçé next to them</li>
          </ol></li>
          <li>Finally, let's show the right emoji next to each fruit.<ol>
              <li>(Before doing this, make sure you have renamed your first array of fruits to "fruits")</li>
              <li>Create a second array which will be called "emojis" and will contain each of your emojis (üçé, üçå, üçí)</li>
              <li>Replace the üçé block inside your loop with the appropriate <span class="blockname">"get and remove the first item from the array"</span> block.
              <li id="exercise_array_while_loops_3">Check that all your fruit are now displaying with a the right emoji next to them</li>
          </ol></li>
      </ol>
      </div>
      <xml class="toolbox" style="display: none">
        <category name="Loops" colour="120">
        <block type="controls_whileUntil"></block>
        <block type="arrays_forEach">
          <field name="VAR">item</field>
          </value>
          <value name="LIST">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
        <block type="controls_for"></block>
      </category>
        <category name="Logic" colour="210">
          <block type="controls_if"></block>
          <block type="logic_negate"></block>
          <block type="logic_compare"></block>
        </category>
        <category name="Values" colour='%{BKY_TEXTS_HUE}'>
          <block type="math_number"></block>
          <block type="text"></block>
          <block type="colour_picker"></block>
          <block type="logic_boolean"></block>
        </category>
        <category name="Html" colour="%{BKY_COLOUR_HUE}">
          <block type="on_start"></block>
          <block type="element_clicked"></block>
          <block type="with_element_by_id"></block>
          <block type="add_element"></block>
          <block type="set_content">
            <value name="VALUE">
              <shadow type="text"> </shadow>
            </value>
          </block>
          <block type="set_attribute"></block>
          <block type="remove_contents"></block>
          <block type="get_input_value_with_id"></block>
          <block type="element_clicked_current"></block>
          <block type="with_elements_by_selector"></block>
        </category>
        <category name="Arrays" colour="%{BKY_LISTS_HUE}">
          <block type="variables_set">
            <field name="VAR">array</field>
            <value name="VALUE">
              <block type="lists_create_with">
              </block>
            </value>
          </block>
          <block type="arrays_getFirst">
            <value name="VALUE">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="arrays_push">
            <value name="LIST">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="lists_isEmpty">
            <value name="VALUE">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="arrays_forEach">
            <field name="VAR">item</field>
            </value>
            <value name="LIST">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="get_sum">
            <value name="ARRAY">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
        </category>
        <category name="Variables" colour="330" custom="VARIABLE"></category>
      </xml>
      </div>

      <div class="exercise" id="exercise_arrays_add_sum">
      <h2>Arrays: Adding, removing, and summing elements</h2>
      <div class="instructions">
      <p>We are now going to learn how to add items to, remove items from, and get the sum of, an array of numbers. We're going to keep a running sum of the last five numbers (this can be a way of keeping track of how a value trends over time, e.g. the last 5 times you weighed yourself, or the last 5 times you went running).
      </p>
      <ol>
          <li>Start with an input box, a button to add numbers, and a span to display the total. (<code class="start_code">&lt;p&gt;Total of the last 5 numbers: &lt;span id="total"&gt;&lt;/span&gt; &lt;/p&gt;<br>&lt;input id="number" /&gt;<br>&lt;button id="add_number"&gt;add value&lt;/button&gt;</code></li>
          <li>Let's start with an array of elements and show their sum<ol>
            <li>In an <span class="blockname">"at the start"</span> block, create a new array called "numbers" with 5 items, all set to the value 0</li>
            <li>Find the span with id "total" and set its text content to the sum of the numbers array, using the <span class="blockname">"get the sum of the numbers in array"</span> block</li>
          </ol></li>
          <li>Next, let's take the number in the input element, add it to the array and display the sum again when the button is clicked<ol>
            <li>You already know how to get the value from the input element is clicked</li>
            <li>Let's add that value to the numbers array. From the arrays menu, use the <span class="blockname">"add ... to the start/end of the array"</span> block, selecting "end", and setting the value to the value of the input element.</li>
            <li>You can now display the sum of the array again, in the same way as you already did</li>
            <li>Test that this works (and note, that it displays the full sum of the array, not just the last 5 numbers).</li>
          </ol></li>
          <li>Last, we need to remove the first (oldest) element from the array. <ol>
            <li>From the arrays menu take a <span class="blockname">"get the first item from the array"</span> block.</li>
            <li>Change the dropdown to from "get" to "remove", to remove the first item</li>
            <li>Where do you need to place this removing so that there are only ever 5 numbers in the list when the sum is calculated?</li>
            <li>Test that this works and that the sum is only ever that of the last 5 numbers.</li>
          </ol></li>
      </ol>
      </div>
      <xml class="toolbox" style="display: none">
        <category name="Logic" colour="210">
          <block type="controls_if"></block>
          <block type="logic_negate"></block>
          <block type="logic_compare"></block>
        </category>
        <category name="Values" colour='%{BKY_TEXTS_HUE}'>
          <block type="math_number"></block>
          <block type="text"></block>
          <block type="colour_picker"></block>
          <block type="logic_boolean"></block>
        </category>
        <category name="Html" colour="%{BKY_COLOUR_HUE}">
          <block type="on_start"></block>
          <block type="element_clicked"></block>
          <block type="with_element_by_id"></block>
          <block type="add_element"></block>
          <block type="set_content">
            <value name="VALUE">
              <shadow type="text"> </shadow>
            </value>
          </block>
          <block type="set_attribute"></block>
          <block type="remove_contents"></block>
          <block type="get_input_value_with_id"></block>
          <block type="element_clicked_current"></block>
          <block type="with_elements_by_selector"></block>
        </category>
        <category name="Arrays" colour="%{BKY_LISTS_HUE}">
          <block type="variables_set">
            <field name="VAR">array</field>
            <value name="VALUE">
              <block type="lists_create_with">
              </block>
            </value>
          </block>
          <block type="arrays_forEach">
            <field name="VAR">item</field>
            </value>
            <value name="LIST">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="arrays_getFirst">
            <value name="VALUE">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="arrays_push">
            <value name="LIST">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
        <block type="get_randomMember">
          <value name="ARRAY">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
          <block type="get_sum">
          <value name="ARRAY">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
        </category>
        <category name="Variables" colour="330" custom="VARIABLE"></category>
      </xml>
      </div>

      <div class="exercise" id="exercise_arrays_sum">
      <h2>Project: Don't go higher than 11!</h2>
      <div class="instructions">
      <p>We are now going to use all the array blocks we have learned about. We're going to create a game where you roll dice and your goal is to not total more than 11.
      </p>
      <ol>
          <li>Start with an empty list (where we will display our rolls), a place to put a total, and a few buttons (<code class="start_code">&lt;p&gt;So far you have rolled:&lt;/p&gt;<br>&lt;ul id="list"&gt;&lt;/ul&gt;<br>&lt;button id="button_roll"&gt;Roll the dice&lt;/button&gt;<br>&lt;p&gt;Total: &lt;span id="total"&gt;0&lt;/span&gt;. &lt;span id="info"&gt;Keep playing!&lt;/span&gt;&lt;/p&gt;<br>&lt;button id="button_remove"&gt;Remove the last roll&lt;/button&gt;<br>&lt;button id="button_restart"&gt;Start again&lt;/button&gt;</code></li>
          <li>The game has the following requirements. Before reading further, how would you break down and implement these requirements into steps? Think through what steps need to happen after each button click. In what order would you implement these steps so as to test each step as early as possible?<ul>
            <li>When "roll the dice" is clicked, a new random number between 1 and 6 should be generated and added</li>
            <li>If the total of all the dice rolls is exactly 11, display "You won" in the <code>&lt;span id="info"&gt;</code></li>
            <li>If the total of all the dice rolls is over 11, display "You lost" in the <code>&lt;span id="info"&gt;</code></li>
            <li>When "remove the last roll" is clicked, we should undo the last roll (this is a cheat button so that we can always win!)</li>
            <li>The list should display all the rolls so far</li>
            <li>The total so far should be displayed in the <code>&lt;span id="total"&gt;</code></li>
            <li>When "start again" is clicked, we should return to the initial state</li>
          </ul></li>
          <li>
            The following steps are needed. Notice that some of them repeat, some of them are similar, and that the game has a "state" which is the array of dice rolls. <ul>
            <li>At the beginning: <ol>
              <li>Display each roll in the array (there are currently no rolls)</li>
              <li>Display the total of all rolls (it is currently 0)</li>
            </ol></li>
            <li>When "roll the dice" is clicked: <ol>
              <li>Pick a random number between 1 and 6</li>
              <li>Add that number to the array of rolls</li>
              <li>Display each roll in the array</li>
              <li>Calculate the total of all rolls<ul>
                <li>If it is greater than 11, display "You lost"</li>
                <li>If it is equal to 11, display "You won"</li>
              </ul></li>
              <li>Display the total of all rolls</li>
            </ol></li>
            <li>When "Start again" is clicked: (this is the same as at the beginning)<ol>
              <li>Display each roll in the array (there are currently no rolls)</li>
              <li>Display the total of all rolls (it is currently 0)</li>
            </ol></li>
            <li>When "Remove the last roll" is clicked: <ol>
              <li>Remove the last roll from the array of rolls</li>
              <li>Display each roll in the array</li>
              <li>Calculate the total of all rolls<ul>
                <li>If it is greater than 11, display "You lost"</li>
                <li>If it is equal to 11, display "You won"</li>
                <li>If it is less than 11, display "Keep playing"</li>
              </ul></li>
              <li>Display the total of all rolls</li>
            </ol></li>
          </ul></li>
          <li>In order to check that anything is working, we need to be able to display an array of rolls and its total, so that's where we will start. <ol>
            <li>In an <span class="blockname">"At the start"</span> block, create an array called "rolls" and put 3 numbers in the array (afterwards we will start with an empty array, but for now having numbers helps)</li>
            <li>Using a loop, display each of the numbers in the array in the list. Check that your code works.</li>
            <li>Set the <code>&lt;span id="total"&gt;</code> to the sum of the numbers in the "rolls" array.</li>
            <li>We will put in the "you won"/"you lost"/"keep playing" logic in last (but you could also do it now if you like)</li>
          </ol></li>
          <li>Next, let's go with the simplest: the restart button <ol>
              <li>Add a <span class="blockname">"When the element with id ... is clicked"</span> block for this button</li>
              <li>We want to set the "rolls" variable to an empty list (Use the same blocks as you did to initialise the rolls variable, then use the gear icon to remove all the items from the array)</li>
              <li>We now want to remove the displayed rolls from the list (You will need to use the <span class="blockname">"Remove the contents of the element"</span> block)</li>
              <li>And we want to set the text <code>&lt;span id="total"&gt;</code> to 0</li>
          </ol></li>
          <li>Slightly more tricky: the "roll the dice" button. Before following the instructions, can you think how we could create a dice?<ol>
              <li>To create a dice, we'll create a new array in the <span class="blockname">"At the start"</span> block, called "dice" (be careful to select the "array" variable, not the "rolls" variable before renaming to "dice"), setting the values as the numbers 1, 2, 3, 4, 5, and 6. We can select a random item from this array when we want to roll a dice.</li>
              <li>Add a <span class="blockname">"When the element with id ... is clicked"</span> block for the button</li>
              <li>Let's roll the dice and add the result to the list. Use the <span class="blockname">"add ... to the start/end of the array"</span> block, setting the "end" of the "rolls" array, and using a <span class="blockname">"get random item from the array"</span> block as the value.</li>
              <li>We could now add a new <code>&lt;li&gt;</code> to the list and set the total. Instead, we are going to re-display the whole list from the array - you will see why in the next step</li>
              <li>To re-display the whole list (and set the total), we need a combination of the two previous steps: find the list, remove its contents, loop over the items in the array and add them to the list, set the total to the sum of the array.</li>
          </ol></li>
          <li>Notice that at this point, we have 3 different versions of the same steps to display the list contents and total. Now imagine we want to change something (like add the "you won"/"you lost"/"keep playing" information). We would have to add it in 3 different places! (And we still have a "remove last roll" button to implement - so it would be 4 places)<ol>
              <li>We can actually write this code so that is exactly the same all the times (looping over an empty array will do nothing, and it's sum will be 0). When we see a piece of code we would like to use multiple times, we create a function.</li>
              <li>From the Functions menu, select a <span class="blockname">"To <i>do something</i>"</span> block and call it "to <i>display the rolls</i>"</li>
              <li>Take all the display code you wrote in the previous step and move it to inside this function.</li>
              <li>In the Functions menu, there is now a <span class="blockname">"display the rolls"</span> block. You can us it as a replacement for the code you just moved. That block will "call" the function you created (this means it will execute all the blocks inside that function)</li>
              <li>You can replace the 2 other versions of your display code with the <span class="blockname">"display the rolls"</span> block.</li>
          </ol></li>
          <li>Now you can add the logic that decides what to put into the <code>&lt;span id="info"&gt;</code>. <ol>
              <li>Hint: You can calculate the sum of the array only once and store the result in a variable.</li>
              <li>Hint: You can add else if and else conditions to the <span class="blockname">"if"</span> block by clicking on the gear icon.</li>
              <li>To test all the logic, put different values into the initial rolls array. Once this is working, you can set the initial rolls array to an empty list.</li>
          </ol></li>
          <li>Last it's time to create our "cheat" functionality, the "Remove the last roll" button.<ol>
              <li>You already know how to do remove the first item from an array. You can use the same block to remove the last item</li>
              <li>Don't forget to call the <span class="blockname">"display the rolls"</span> function!</li>
          </ol></li>
      </ol>
      </div>
      <xml class="toolbox" style="display: none">
        <category name="Logic" colour="210">
          <block type="controls_if"></block>
          <block type="logic_negate"></block>
          <block type="logic_compare"></block>
        </category>
        <category name="Values" colour='%{BKY_TEXTS_HUE}'>
          <block type="math_number"></block>
          <block type="text"></block>
          <block type="colour_picker"></block>
          <block type="logic_boolean"></block>
        </category>
        <category name="Html" colour="%{BKY_COLOUR_HUE}">
          <block type="on_start"></block>
          <block type="element_clicked"></block>
          <block type="with_element_by_id"></block>
          <block type="add_element"></block>
          <block type="set_content">
            <value name="VALUE">
              <shadow type="text"> </shadow>
            </value>
          </block>
          <block type="set_attribute"></block>
          <block type="remove_contents"></block>
          <block type="get_input_value_with_id"></block>
          <block type="element_clicked_current"></block>
          <block type="with_elements_by_selector"></block>
        </category>
        <category name="Arrays" colour="%{BKY_LISTS_HUE}">
          <block type="variables_set">
            <field name="VAR">array</field>
            <value name="VALUE">
              <block type="lists_create_with">
              </block>
            </value>
          </block>
          <block type="arrays_forEach">
            <field name="VAR">item</field>
            </value>
            <value name="LIST">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="arrays_getFirst">
            <value name="VALUE">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
          <block type="arrays_push">
            <value name="LIST">
              <block type="variables_get">
                  <field name="VAR">array</field>
              </block>
            </value>
          </block>
        <block type="get_randomMember">
          <value name="ARRAY">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
          <block type="get_sum">
          <value name="ARRAY">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
        </category>
        <category name="Variables" colour="330" custom="VARIABLE"></category>
        <category name="Functions" colour="290" custom="PROCEDURE"></category>
      </xml>
      </div>

      
      <div class="exercise" id="exercise_create_teams">
      <h2>Project: Select a random facilitator</h2>
      <div class="instructions">
        <p>For this project, you should provide the user with the ability to input names to an array, and a "select facilitator" button that selects and displays a random name</p>
      </div>
      </div>

      <div class="exercise" id="exercise_earnings_expenses">
      <h2>Project: Show earnings and expenses</h2>
      <div class="instructions">
        <p>For this project, you should provide the user with the ability to input earnings and expenses and see the totals</p>
        <ol>
          <li>Two lists and three totals should be shown: the earnings, the expenses, the total earnings, the total expenses and the total balance overall</li>
          <li>A positive number is an earning</li>
          <li>A negative number is an expense</li>
          <li>If the user inputs 5, -2, 25, -10, -7, the result should look something like: 
            <div style="background-color: azure;">
              Earnings: 30
              <ul>
                <li>5</li>
                <li>25</li>
              </ul>
              Expenses: -19
              <ul>
                <li>-2</li>
                <li>-10</li>
                <li>-3</li>
              </ul>
              Balance: 11
            </div>
          </li>
        </ol>
      </div>
      </div>
      
      <div class="exercise" id="exercise_list_consolidation">
      <h2>Project: List of links</h2>
      <div class="instructions">
        <p>Repeat the exercise to show a list of your favourite links. Use a loop so that there are only two "create a ... element" blocks (one for the &lt;li&gt;, one for the &lt;a&gt;). Outline what your solution needs to look like, and implement it step by step, clicking "run" at each iteration to check your work</p>
      </div>
      </div>
      
      <div class="exercise" id="exercise_story_book">
      <h2>Project: Create a story book</h2>
      <div class="instructions"><p>The great thing about story books is that you never know what will happen when you turn the page!</p>
      <ol>
          <li>Create a simple story book "experience" where you click on a button to "turn the page" and something new happens each time</li>
          <li>Make the story a bit more complicated. Maybe the user has choices? Maybe an image appears at the end?</li>
      </ol>
      </div></div>
      
      <div class="exercise" id="exercise_image_carousel">
      <h2>Project: Build an image carousel</h2>
      <div class="instructions"><p>
        An image carousel has an image with two buttons ("previous" and "next")
        that allow the user to cycle through a list of images.
      </p>
      <ul>
        <li>
          A list of at least 3 image URLs should be defined in an array (you can
          use public URLs from stock photograph websites, or copy the image link from a google search result)
        </li>
        <li>
          Clicking on the "previous" button should show the previous image
        </li>
        <li>Clicking on the "next" button should show the next image</li>
        <li>
          The images should cycle (the next image after the last image should be the first image, and the previous image before the first image should be the last image)
        </li>
      </ul>
      <p>
        You should first break down this problem into steps, then outline how
        each step will probably be solved (and how you can test that it does what you think it does), before creating any blocks
      </p>
    </div></div>
    
      <div class="exercise" id="exercise_projects">
      <h2>Some more "projects"</h2>
      <div class="instructions">
        <p>
        Here are some additional ideas of projects that can be accomplished with the current blocks 
        (some newer blocks haven't been properly introduced yet) and might be suitable/adaptable as 
        landing page enhancements. They all fit generally into the "add some button or event handlers 
        that add or modify some html" category.
      </p>
      <ul>
        <li>Shopping cart<ol>
          <li>Create a list of products.</li>
          <li>Display each product in an html list with a "add to shopping cart" button next to it</li>
          <li>When the button is clicked, add the product to a separate html list that represents the current shopping cart</li>
        </ol></li>
        <li>List with a hidden 2nd level<ol>
          <li>Create an html list with a second list inside each li (maybe a list of folders and the files in each folder?)</li>
          <li>Hide the inner lists</li>
          <li>Clicking the first level item toggles the visibility of the inner list (if it's hidden, show it, if it's visible, hide it)</li>
        </ol></li>
        <li>Hamburger menu<ol>
          <li>Can be vaguely inspired by e.g. https://dev.to/devggaurav/let-s-build-a-responsive-navbar-and-hamburger-menu-using-html-css-and-javascript-4gci</li>
          <li>Display an ul of nav links as a "closed" hamburger</li>
          <li>Clicking on the hamburger makes the ul visible</li>
          <li>Clicking on the hamburger transforms the hamburger into an X</li>
          <li>Clicking on the X makes the ul invisible (and shows the hamburger)</li>
          <li>Clicking on any link makes the ul invisible (and shows the hamburger)</li>
        </ol></li>
        <li>Create a check list<ol>
          <li>Display a list of todo items</li>
          <li>When each item is clicked, mark it in some way (strike through, invisible)</li>
          <li>Note: this is basically a variant of the shopping cart</li>
        </ol></li>
        <li>Create a todo list<ol>
          <li>Display an input and an "add todo" button (currently the input and means of accessing the input don't exist, so would have to add some blocks)</li>
          <li>When the "add todo" is clicked, add the item to an html list</li>
          <li>Stretch goal: combine with the exercise above</li>
        </ol></li>
      </ul>
      </div>
    </div>

    <footer>
      <h3>CYF Blocks is a project of <a href="https://codeyourfuture.io">Code Your Future</a></h3>
      <p>Recap your HTML/CSS knowledge with this <a href="https://scrimba.com/learn/htmlcss">free crash course</a> on Scrimba.</p>
    </footer>
     <section role="dialog" aria-live="assertive" class="toast" id="toast" aria-labelledby="toast-title">
      <h4 class="toast-title"></h4>
    </section>
    <xml id="toolbox" style="display: none">
      <category name="Loops" colour="120">
        <block type="controls_whileUntil"></block>
        <block type="arrays_forEach">
          <field name="VAR">item</field>
          </value>
          <value name="LIST">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
        <block type="controls_for"></block>
      </category>
      <category name="Logic" colour="210">
        <block type="controls_if"></block>
        <block type="logic_negate"></block>
        <block type="logic_compare"></block>
      </category>
      <category name="Values" colour='%{BKY_TEXTS_HUE}'>
        <block type="math_number"></block>
        <block type="text"></block>
        <block type="colour_picker"></block>
        <block type="logic_boolean"></block>
        <block type="get_randomWord"></block>
        <block type="text_to_speech"></block>
      </category>
      <category name="Html" colour="%{BKY_COLOUR_HUE}">
        <block type="on_start"></block>
        <block type="element_clicked"></block>
        <block type="with_element_by_id"></block>
        <block type="add_element"></block>
        <block type="set_content">
          <value name="VALUE">
            <shadow type="text"> </shadow>
          </value>
        </block>
        <block type="set_attribute"></block>
        <block type="remove_contents"></block>
        <block type="get_input_value_with_id"></block>
        <block type="element_clicked_current"></block>
        <block type="with_elements_by_selector"></block>
      </category>
      <category name="Arrays" colour="%{BKY_LISTS_HUE}"" >
        <block type="variables_set">
          <field name="VAR">array</field>
          <value name="VALUE">
            <block type="lists_create_with">
              <!--
              would be nice but the shadow blocks don't know what to do with themselves when the list
              is mutated -> https://github.com/google/blockly/issues/4939
              <value name="ADD0">
                <shadow type="text"> </shadow>
              </value>
              <value name="ADD1">
                <shadow type="text"> </shadow>
              </value>
              <value name="ADD2">
                <shadow type="text"> </shadow>
              </value>-->
            </block>
          </value>
        </block>
        <block type="arrays_getFirst">
          <value name="VALUE">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
        <block type="arrays_push">
          <value name="LIST">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
        <block type="lists_isEmpty">
          <value name="VALUE">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
        <block type="arrays_forEach">
          <field name="VAR">item</field>
          </value>
          <value name="LIST">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
        <block type="get_randomMember">
          <value name="ARRAY">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
        <block type="get_sum">
          <value name="ARRAY">
            <block type="variables_get">
                <field name="VAR">array</field>
            </block>
          </value>
        </block>
      </category>
      <!--<category name="Lists" colour="%{BKY_LISTS_HUE}"" >
        <block type="variables_set">
          <field name="VAR">list</field>
          <value name="VALUE">
            <block type="linked_lists_create_with"> </block>
          </value>
        </block>
        <block type="linked_lists_get_current">
          <value name="VALUE">
            <block type="variables_get">
                <field name="VAR">list</field>
            </block>
          </value>
        </block>
        <block type="linked_lists_set_current">
          <value name="VALUE">
            <block type="variables_get">
                <field name="VAR">list</field>
            </block>
          </value>
        </block>
        <block type="linked_lists_has_current">
          <value name="VALUE">
            <block type="variables_get">
                <field name="VAR">list</field>
            </block>
          </value>
        </block>
        <block type="linked_lists_has_next">
          <value name="VALUE">
            <block type="variables_get">
                <field name="VAR">list</field>
            </block>
          </value>
        </block>
        <block type="linked_lists_has_previous">
          <value name="VALUE">
            <block type="variables_get">
                <field name="VAR">list</field>
            </block>
          </value>
        </block>
      </category>-->
      <category name="Variables" colour="330" custom="VARIABLE"></category>
      <category name="Functions" colour="290" custom="PROCEDURE"></category>
    </xml>
    <script src="exercises.js"></script>
</body>
</html>
